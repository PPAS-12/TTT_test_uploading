#this is a serious od decisions to remove other liyue warlord's core after defeat or annex them
#to release memory, protect player's CPU0 and prevent any potential bug(s)
#well it did seems not such attractive to players because these decisions don't have any actual benefits now
#so if you have better ideas such as transfer navy, unite at peace or recruit characters, you can also put them into these decisons.
#i'm really a caibi.

defeat_or_annex_other_warlords = {
	#Get rid of Zhidong invaders
	#ZDG - 216
	defeat_zdg = {
		icon = generic_civil_support
		
		visible = {
			216 = { is_core_of = ZDG }
			owns_state = 216
			NOT = { country_exists = ZDG }
			NOT = { tag = ZDG }
			NOT = {
				any_other_country = {
					original_tag = ZDG
				}
			}
		}
		
		highlight_states = {
			highlight_state_targets = { state = 216 } 
		}
		
		available = {
			216 = {
				CONTROLLER = {
					tag = ROOT
				}
			}
		}

		modifier = {
			political_power_cost = 0.25
		}

		ai_will_do = {
			base = 1000
			#Really really important
		}
		
		days_remove = 60
		days_re_enable = 0
		
		cost = 25
		
		complete_effect = {
			
		}

		remove_effect = {
			every_state = {
				limit = { is_core_of = ZDG }
				remove_core_of = ZDG
			}
		}
	}
	
	#XRG - 166
	defeat_XRG = {
		icon = generic_civil_support
		
		visible = {
			166 = { is_core_of = XRG }
			owns_state = 166
			NOT = { country_exists = XRG }
			NOT = { tag = XRG }
			NOT = {
				any_other_country = {
					original_tag = XRG
				}
			}
		}
		
		highlight_states = {
			highlight_state_targets = { state = 166 } 
		}
		
		available = {
			166 = {
				CONTROLLER = {
					tag = ROOT
				}
			}
		}

		modifier = {
			political_power_cost = 0.25
		}

		ai_will_do = {
			base = 1000
			#Really really important
		}
		
		days_remove = 60
		days_re_enable = 0
		
		cost = 25
		
		complete_effect = {
			
		}

		remove_effect = {
			every_state = {
				limit = { is_core_of = XRG }
				remove_core_of = XRG
			}
		}
	}
	
	#RTG - 155
	defeat_RTG = {
		icon = generic_civil_support
		
		visible = {
			155 = { is_core_of = RTG }
			owns_state = 155
			NOT = { country_exists = RTG }
			NOT = { tag = RTG }
			NOT = {
				any_other_country = {
					original_tag = RTG
				}
			}
		}
		
		highlight_states = {
			highlight_state_targets = { state = 155 } 
		}
		
		available = {
			155 = {
				CONTROLLER = {
					tag = ROOT
				}
			}
		}

		modifier = {
			political_power_cost = 0.25
		}

		ai_will_do = {
			base = 1000
			#Really really important
		}
		
		days_remove = 60
		days_re_enable = 0
		
		cost = 25
		
		complete_effect = {
			
		}

		remove_effect = {
			every_state = {
				limit = { is_core_of = RTG }
				remove_core_of = RTG
			}
		}
	}
	
	#ANG - 152
	defeat_ANG = {
		icon = generic_civil_support
		
		visible = {
			152 = { is_core_of = ANG }
			owns_state = 152
			NOT = { country_exists = ANG }
			NOT = { tag = ANG }
			NOT = {
				any_other_country = {
					original_tag = ANG
				}
			}
		}
		
		highlight_states = {
			highlight_state_targets = { state = 152 } 
		}
		
		available = {
			152 = {
				CONTROLLER = {
					tag = ROOT
				}
			}
		}

		modifier = {
			political_power_cost = 0.25
		}

		ai_will_do = {
			base = 1000
			#Really really important
		}
		
		days_remove = 60
		days_re_enable = 0
		
		cost = 25
		
		complete_effect = {
			
		}

		remove_effect = {
			every_state = {
				limit = { is_core_of = ANG }
				remove_core_of = ANG
			}
		}
	}
	
	#LYU - 127
	defeat_LYU = {
		icon = generic_civil_support
		
		visible = {
			127 = { is_core_of = LYU }
			owns_state = 127
			NOT = { country_exists = LYU }
			NOT = { tag = LYU }
			NOT = {
				any_other_country = {
					original_tag = LYU
				}
			}
		}
		
		highlight_states = {
			highlight_state_targets = { state = 127 } 
		}
		
		available = {
			127 = {
				CONTROLLER = {
					tag = ROOT
				}
			}
		}

		modifier = {
			political_power_cost = 0.25
		}

		ai_will_do = {
			base = 1000
			#Really really important
		}
		
		days_remove = 60
		days_re_enable = 0
		
		cost = 25
		
		complete_effect = {
			
		}

		remove_effect = {
			every_state = {
				limit = { is_core_of = LYU }
				remove_core_of = LYU
			}
		}
	}
	
	#KQG - 165
	defeat_KQG = {
		icon = generic_civil_support
		
		visible = {
			165 = { is_core_of = KQG }
			owns_state = 165
			NOT = { country_exists = KQG }
			NOT = { tag = KQG }
			NOT = {
				any_other_country = {
					original_tag = KQG
				}
			}
		}
		
		highlight_states = {
			highlight_state_targets = { state = 165 } 
		}
		
		available = {
			165 = {
				CONTROLLER = {
					tag = ROOT
				}
			}
		}

		modifier = {
			political_power_cost = 0.25
		}

		ai_will_do = {
			base = 1000
			#Really really important
		}
		
		days_remove = 60
		days_re_enable = 0
		
		cost = 25
		
		complete_effect = {
			
		}

		remove_effect = {
			every_state = {
				limit = { is_core_of = KQG }
				remove_core_of = KQG
			}
		}
	}
	
	#XQG - 148
	defeat_XQG = {
		icon = generic_civil_support
		
		visible = {
			148 = { is_core_of = XQG }
			owns_state = 148
			NOT = { country_exists = XQG }
			NOT = { tag = XQG }
			NOT = {
				any_other_country = {
					original_tag = XQG
				}
			}
		}
		
		highlight_states = {
			highlight_state_targets = { state = 148 } 
		}
		
		available = {
			148 = {
				CONTROLLER = {
					tag = ROOT
				}
			}
		}

		modifier = {
			political_power_cost = 0.25
		}

		ai_will_do = {
			base = 1000
			#Really really important
		}
		
		days_remove = 60
		days_re_enable = 0
		
		cost = 25
		
		complete_effect = {
			
		}

		remove_effect = {
			every_state = {
				limit = { is_core_of = XQG }
				remove_core_of = XQG
			}
		}
	}
	
	#NNG - 126
	defeat_NNG = {
		icon = generic_civil_support
		
		visible = {
			126 = { is_core_of = NNG }
			owns_state = 126
			NOT = { country_exists = NNG }
			NOT = { tag = NNG }
			NOT = {
				any_other_country = {
					original_tag = NNG
				}
			}
		}
		
		highlight_states = {
			highlight_state_targets = { state = 126 } 
		}
		
		available = {
			126 = {
				CONTROLLER = {
					tag = ROOT
				}
			}
		}

		modifier = {
			political_power_cost = 0.25
		}

		ai_will_do = {
			base = 1000
			#Really really important
		}
		
		days_remove = 60
		days_re_enable = 0
		
		cost = 25
		
		complete_effect = {
			
		}

		remove_effect = {
			every_state = {
				limit = { is_core_of = NNG }
				remove_core_of = NNG
			}
			NNG = {
				LYU_Yelan = { set_nationality = ROOT }
			}
		}
	}
	
	#XOG - 143
	defeat_XOG = {
		icon = generic_civil_support
		
		visible = {
			143 = { is_core_of = XOG }
			owns_state = 143
			NOT = { country_exists = XOG }
			NOT = { tag = XOG }
			NOT = {
				any_other_country = {
					original_tag = XOG
				}
			}
		}
		
		highlight_states = {
			highlight_state_targets = { state = 143 } 
		}
		
		available = {
			143 = {
				CONTROLLER = {
					tag = ROOT
				}
			}
		}

		modifier = {
			political_power_cost = 0.25
		}

		ai_will_do = {
			base = 1000
			#Really really important
		}
		
		days_remove = 60
		days_re_enable = 0
		
		cost = 25
		
		complete_effect = {
			
		}

		remove_effect = {
			every_state = {
				limit = { is_core_of = XOG }
				remove_core_of = XOG
			}
		}
	}
}

    
this_is_Liyue = {
	ting_NingGuang_shuo = {
		icon = infiltrate_state
		visible = {
			OR = {
				owns_state = FROM
				has_full_control_of_state = FROM
			}
			FROM = { 
				has_state_flag = is_Liyues_territory 
				NOT = { is_core_of = ROOT }
			}
		}
		available = {
			FROM = {
				OR = {
					any_neighbor_state = { is_core_of = ROOT }
					state = 126					
				}
				#OR = {
				#	compliance > 35
				#	impassable = yes
				#	check_variable = { core_countries^num < 1 } # have no cores
				#}
			}
		}
		cost = 25
		days_remove = 50

		state_target = yes
		on_map_mode = map_only
		#target_array = owned_states

		ai_will_do = {
			base = 100
	    }

		remove_effect = {
			FROM = { add_core_of = ROOT }
		}
	}
}

Liyue_Now = {
	rest_time_peace_with_Guyun_Stone_Forest = {
		activation = {
			has_global_flag = Liyue_Civil_War
		    has_war_with = NNG
			all_state = {
				if = {
					limit = {	
				        has_state_flag = is_Liyues_territory
                        NOT = { OR = { state = 126  state = 242 } }
				    }
				    is_controlled_by = ROOT
				}
			}
			has_full_control_of_state = 129
			has_full_control_of_state = 145
			has_full_control_of_state = 148
        }
        available = {
            has_war = no
        }
        icon = mission_icon
        is_good = no
        days_mission_timeout = 500
        selectable_mission = no
        complete_effect = {
            add_stability = 0.05
        }
        timeout_effect = {
			add_political_power = -200
            add_stability = -0.15
			add_war_support = -0.15
			hidden_effect = {
			    every_state = {
                    limit = { 
				        is_controlled_by = ROOT 
			        }
			        ROOT = { transfer_state = PREV }
		        }
			}
			white_peace = NNG 
        }
	}
	negotiate_with_Guyun_Stone_Forest = {
		visible = { 
			has_global_flag = Liyue_Civil_War
		    has_war_with = NNG
			all_state = {
				if = {
					limit = {	
				        has_state_flag = is_Liyues_territory
                        NOT = { OR = { state = 126  state = 242 } }
				    }
				    is_controlled_by = ROOT
				}
			}
			NOT = { has_country_flag = Guyun_Stone_Forest_scheme_has_been_given } 
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = has_controlled_Liyue_mainland
			    all_state = {
				    if = {
					    limit = {	
				            has_state_flag = is_Liyues_territory
                            NOT = { OR = { state = 126  state = 242 } }
				        }
				        is_controlled_by = ROOT
				    }
			    }
				has_full_control_of_state = 129
			    has_full_control_of_state = 145
			    has_full_control_of_state = 148
			}
		}
		fire_only_once = yes
		cost = 50
		
		complete_effect = {
			set_country_flag = {
				flag = Guyun_Stone_Forest_scheme_has_been_given
				days = 120
				value = 1
			}
			NNG = {
				country_event = {
					id = liyue.53
					days = 3
				}
			}
		}
		ai_will_do = {
			base = 50
		}
	}
	white_peace_with_Guyun_Stone_Forest = {
		visible = {
			has_global_flag = Liyue_Civil_War
		    has_war_with = NNG
			all_state = {
				if = {
					limit = {	
				        has_state_flag = is_Liyues_territory
                        NOT = { OR = { state = 126  state = 242 } }
				    }
				    is_controlled_by = ROOT
				}
			}
			NOT = { has_country_flag = Guyun_Stone_Forest_scheme_has_been_given } 	
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = has_controlled_Liyue_mainland
			    all_state = {
				    if = {
					    limit = {	
				            has_state_flag = is_Liyues_territory
                            NOT = { OR = { state = 126  state = 242 } }
				        }
				        is_controlled_by = ROOT
				    }
			    }
				has_full_control_of_state = 129
			    has_full_control_of_state = 145
			    has_full_control_of_state = 148
			}
		}
        fire_only_once = yes
		cost = 50

		complete_effect = {
			set_country_flag = {
				flag = Guyun_Stone_Forest_scheme_has_been_given
				days = 120
				value = 1
			}
			hidden_effect = {
			    every_state = {
                    limit = { 
				        is_controlled_by = ROOT 
			        }
			        ROOT = { transfer_state = PREV }
		        }
			}
			white_peace = NNG 
		}
		ai_will_do = {
			base = 100
		}
	}
	force_landing_Guyun_Stone_Forest = {
		visible = { 
			has_global_flag = Liyue_Civil_War
		    has_war_with = NNG
			NOT = { tag = ZDG }
			has_country_flag = allowed_to_force_landing_Guyun_Stone_Forest
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = has_controlled_Liyue_mainland
			    all_state = {
				    if = {
					    limit = {	
				            has_state_flag = is_Liyues_territory
                            NOT = { OR = { state = 126  state = 242 } }
				        }
				        is_controlled_by = ROOT
				    }
			    }
				has_full_control_of_state = 129
			    has_full_control_of_state = 145
			    has_full_control_of_state = 148
			}
			has_equipment = {
                infantry_equipment > 69999
            }
			has_equipment = {
				ttt_uniform_eq > 33999
            }
			has_equipment = {
				artillery_equipment > 1999
            }
			has_equipment = {
				motorized_equipment > 1999
            }
			has_equipment = {
				support_equipment > 5999
            }
			has_equipment = {
				grain_conversion_eq > 84999
            }
		}
		fire_only_once = yes
        days_remove = 3
		cost = 100
		
		complete_effect = {
			add_stability = -0.1
			add_war_support = -0.1
			set_country_flag = {
				flag = rest_time_landing_Guyun_Stone_Forest
				days = 10
				value = 1
			}
			set_country_flag = {
				flag = is_landing_Guyun_Stone_Forest
				days = 120
				value = 1
			}
		}
		remove_effect = {
			add_equipment_to_stockpile = {
                type = infantry_equipment
                amount = -70000
            }
			add_equipment_to_stockpile = {
                type = ttt_uniform_eq
                amount = -40000
            }
			add_equipment_to_stockpile = {
                type = artillery_equipment
                amount = -2000
            }
			add_equipment_to_stockpile = {
                type = motorized_equipment
                amount = -2000
            }
			add_equipment_to_stockpile = {
                type = support_equipment
                amount = -6000
            }
			add_equipment_to_stockpile = {
                type = grain_conversion_eq
                amount = -85000
            }
			load_oob = "LYU_civilwar"
		}
		ai_will_do = {
			base = 1000
		}
	}
}